<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Configure Houses</title>
  <style>
    body {
      font-family: monospace;
      background: #111;
      color: #0f0;
      padding: 20px;
    }
    h1 {
      text-align: center;
    }
    #houses {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 20px;
    }
    .house {
      background: #000;
      border: 2px solid #0f0;
      width: 150px;
      height: 150px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      font-size: 1.2em;
      text-align: center;
    }
    .delete {
      position: absolute;
      top: 5px;
      right: 5px;
      background: #f00;
      color: #000;
      border: none;
      cursor: pointer;
      font-size: 0.8em;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      background: #0f0;
      border: none;
      color: #000;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>Configure Houses</h1>
  <div id="houses"></div>
  <button onclick="addHouse()">Add House</button>

  <script>
    let houses = [];

    if (localStorage.getItem('houses')) {
      houses = JSON.parse(localStorage.getItem('houses'));
    }

    renderHouses();

    function addHouse() {
      let i = 1;
      while (houses.includes(i)) {
        i++;
      }
      houses.push(i);
      save();
      renderHouses();
    }

    function deleteHouse(id) {
      houses = houses.filter(h => h !== id);
      localStorage.removeItem(`house_${id}_config`);
      save();
      renderHouses();
    }

    function save() {
      localStorage.setItem('houses', JSON.stringify(houses));
    }

    function renderHouses() {
      const container = document.getElementById('houses');
      container.innerHTML = '';
      houses.sort((a, b) => a - b).forEach(houseId => {
        const div = document.createElement('div');
        div.className = 'house';
        div.innerHTML = `House ${houseId}<br><small>(Click to configure)</small>`;
        div.onclick = () => {
          window.location.href = `configure_house_ui.html?house=${houseId}`;
        };
        const del = document.createElement('button');
        del.className = 'delete';
        del.textContent = 'X';
        del.onclick = (e) => {
          e.stopPropagation();
          if (confirm(`Delete House ${houseId}?`)) {
            deleteHouse(houseId);
          }
        };
        div.appendChild(del);
        container.appendChild(div);
      });
    }
  </script>
</body>
</html>
